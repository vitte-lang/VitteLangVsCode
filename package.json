{
  "name": "vitte-studio",
  "displayName": "Vitte Language Support",
  "description": "Support complet pour Vitte, Vit et Vitl : grammaire, LSP, debug, tasks, tests, explorer, docs, bench & playground.",
  "version": "1.7.0",
  "publisher": "VitteStudio",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/roussov/vittelang-vscode.git"
  },
  "homepage": "https://github.com/roussov/vittelang-vscode#readme",
  "bugs": {
    "url": "https://github.com/roussov/vittelang-vscode/issues"
  },
  "engines": {
    "vscode": "^1.105.0"
  },
  "categories": [
    "Programming Languages",
    "Debuggers"
  ],
  "icon": "images/icon.png",
  "extensionKind": [
    "workspace",
    "ui"
  ],
  "main": "./out/extension.js",
  "files": [
    "out/**",
    "server/out/**",
    "syntaxes/**",
    "media/**",
    "schemas/**",
    "language-configuration.json",
    "README.md",
    "CHANGELOG.md",
    "LICENSE"
  ],
  "activationEvents": [
    "onLanguage:vitte",
    "onLanguage:vit",
    "onLanguage:vitl",
    "onView:vitteDiagnostics",
    "onView:vitteModules",
    "onView:vitteExplorer",
    "onView:vitteView",
    "onCommand:vitte.showServerLog",
    "onCommand:vitte.restartServer",
    "onCommand:vitte.runAction",
    "onCommand:vitte.runActionWithArgs",
    "onCommand:vitte.debug.runFile",
    "onCommand:vitte.debug.attachServer",
    "onCommand:vitte.organizeImports",
    "onCommand:vitte.fixAll",
    "onCommand:vitte.renameSymbol",
    "onCommand:vitte.applyEditSample",
    "onCommand:vitte.progressSample",
    "onCommand:vitte.showInfo",
    "onCommand:vitte.diagnostics.refresh",
    "onCommand:vitte.diagnostics.open",
    "onCommand:vitte.modules.refresh",
    "onCommand:vitte.refreshExplorer",
    "onCommand:vitte.revealInExplorer",
    "onCommand:vitte.openDocs",
    "onCommand:vitte.openPlayground",
    "onCommand:vitte.detectToolchain",
    "onCommand:vitte.bench",
    "onCommand:vitte.benchReport",
    "onCommand:vitte.openBenchDir",
    "onCommand:vitte.build",
    "onCommand:vitte.clean",
    "onCommand:vitte.run",
    "onCommand:vitte.test",
    "onCommand:vitte.testCurrent",
    "onCommand:vitte.switchProfile",
    "onCommand:vitte.toggleIncremental",
    "onCommand:vitte.refreshTests",
    "onCommand:vitte.runTests",
    "onCommand:vitte.telemetry.toggle",
    "onDebugInitialConfigurations",
    "onDebugResolve:vitte",
    "onDebugResolve:vitl"
  ],
  "contributes": {
    "languages": [
      {
        "id": "vitte",
        "aliases": [
          "Vitte",
          "vit",
          "vitl"
        ],
        "extensions": [
          ".vitte",
          ".vit",
          ".vitl"
        ],
        "configuration": "./language-configuration.json"
      },
      {
        "id": "vit",
        "aliases": [
          "Vit"
        ],
        "extensions": [
          ".vit"
        ],
        "configuration": "./language-configuration.json"
      },
      {
        "id": "vitl",
        "aliases": [
          "Vitl",
          "Vitte Light"
        ],
        "extensions": [
          ".vitl"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "vitte",
        "scopeName": "source.vitte",
        "path": "./syntaxes/vitte.tmLanguage.json"
      },
      {
        "language": "vit",
        "scopeName": "source.vitte",
        "path": "./syntaxes/vitte.tmLanguage.json"
      },
      {
        "language": "vitl",
        "scopeName": "source.vitte",
        "path": "./syntaxes/vitte.tmLanguage.json"
      }
    ],
    "jsonValidation": [
      {
        "fileMatch": "vitte.config.json",
        "url": "./schemas/vitte-config.schema.json"
      },
      {
        "fileMatch": ".vitte/config.json",
        "url": "./schemas/vitte-config.schema.json"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "vitte-sidebar",
          "title": "Vitte",
          "icon": "media/icons/vitte-logo.svg"
        }
      ]
    },
    "views": {
      "vitte-sidebar": [
        {
          "id": "vitteView",
          "name": "Explorateur Vitte"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "vitteView",
        "contents": "# Bienvenue dans Vitte\n\nAucun projet détecté.\n\n- $(refresh) **Rafraîchir** pour rescanner le workspace → `vscode:command:vitte.refreshExplorer`\n- $(book) **Docs** → `vscode:command:vitte.openDocs`\n- $(beaker) **Playground** → `vscode:command:vitte.openPlayground`\n",
        "when": "view == vitteView && !workspaceFolderCount"
      }
    ],
    "debuggers": [
      {
        "type": "vitte",
        "label": "Vitte Debug",
        "languages": [
          "vitte",
          "vit",
          "vitl"
        ],
        "configurationAttributes": {
          "launch": {
            "required": [],
            "properties": {
              "program": {
                "type": "string",
                "description": "Chemin vers vitte-runtime (optionnel, sinon auto)",
                "default": ""
              },
              "cwd": {
                "type": "string",
                "description": "Répertoire de travail",
                "default": "${workspaceFolder}"
              },
              "args": {
                "type": "array",
                "description": "Arguments CLI",
                "default": []
              },
              "trace": {
                "type": "boolean",
                "default": false
              },
              "sourceMaps": {
                "type": "boolean",
                "default": false
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "type": "vitte",
            "request": "launch",
            "name": "Vitte: Launch current file",
            "program": "",
            "cwd": "${workspaceFolder}",
            "args": [
              "run",
              "${file}"
            ]
          },
          {
            "type": "vitte",
            "request": "launch",
            "name": "Vitte: Launch project entry",
            "program": "",
            "cwd": "${workspaceFolder}",
            "args": [
              "run"
            ]
          }
        ]
      },
      {
        "type": "vitl",
        "label": "Vitl Debug",
        "languages": [
          "vitte",
          "vit",
          "vitl"
        ],
        "configurationAttributes": {
          "launch": {
            "required": [
              "program"
            ],
            "properties": {
              "program": {
                "type": "string",
                "description": "Fichier à exécuter",
                "default": "${file}"
              },
              "cwd": {
                "type": "string",
                "description": "Répertoire de travail",
                "default": "${workspaceFolder}"
              },
              "args": {
                "type": "array",
                "description": "Arguments CLI",
                "default": []
              },
              "stopOnEntry": {
                "type": "boolean",
                "default": true
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "type": "vitl",
            "request": "launch",
            "name": "Vitl: Launch current file",
            "program": "${file}",
            "cwd": "${workspaceFolder}",
            "stopOnEntry": true,
            "args": []
          }
        ]
      }
    ],
    "commands": [
      {
        "command": "vitte.showServerLog",
        "title": "Vitte: Show Server Log"
      },
      {
        "command": "vitte.restartServer",
        "title": "Vitte: Restart Language Server"
      },
      {
        "command": "vitte.runAction",
        "title": "Vitte: Run Action"
      },
      {
        "command": "vitte.runActionWithArgs",
        "title": "Vitte: Run Action (Args)"
      },
      {
        "command": "vitte.debug.runFile",
        "title": "Vitte Debug: Run File"
      },
      {
        "command": "vitte.debug.attachServer",
        "title": "Vitte Debug: Attach"
      },
      {
        "command": "vitte.organizeImports",
        "title": "Vitte: Organize Imports"
      },
      {
        "command": "vitte.fixAll",
        "title": "Vitte: Fix All"
      },
      {
        "command": "vitte.renameSymbol",
        "title": "Vitte: Rename Symbol"
      },
      {
        "command": "vitte.applyEditSample",
        "title": "Vitte: Apply Sample Edit"
      },
      {
        "command": "vitte.progressSample",
        "title": "Vitte: Progress Sample"
      },
      {
        "command": "vitte.showInfo",
        "title": "Vitte: Show Info"
      },
      {
        "command": "vitte.diagnostics.refresh",
        "title": "Vitte: Rafraîchir les diagnostics"
      },
      {
        "command": "vitte.diagnostics.open",
        "title": "Vitte: Ouvrir le diagnostic"
      },
      {
        "command": "vitte.modules.refresh",
        "title": "Vitte: Rafraîchir la structure"
      },
      {
        "command": "vitte.refreshExplorer",
        "title": "Vitte: Rafraîchir l'explorer"
      },
      {
        "command": "vitte.revealInExplorer",
        "title": "Vitte: Révéler dans l'explorateur"
      },
      {
        "command": "vitte.openDocs",
        "title": "Vitte: Open Docs",
        "category": "Vitte"
      },
      {
        "command": "vitte.openPlayground",
        "title": "Vitte: Open Playground",
        "category": "Vitte"
      },
      {
        "command": "vitte.detectToolchain",
        "title": "Vitte: Detect Toolchain",
        "category": "Vitte"
      },
      {
        "command": "vitte.bench",
        "title": "Vitte: Run Benchmarks",
        "category": "Vitte"
      },
      {
        "command": "vitte.benchReport",
        "title": "Vitte: Run Benchmarks and Open Report",
        "category": "Vitte"
      },
      {
        "command": "vitte.openBenchDir",
        "title": "Vitte: Open Bench Directory",
        "category": "Vitte"
      },
      {
        "command": "vitte.build",
        "title": "Vitte: Build",
        "category": "Vitte"
      },
      {
        "command": "vitte.clean",
        "title": "Vitte: Clean",
        "category": "Vitte"
      },
      {
        "command": "vitte.run",
        "title": "Vitte: Run",
        "category": "Vitte"
      },
      {
        "command": "vitte.test",
        "title": "Vitte: Test",
        "category": "Vitte"
      },
      {
        "command": "vitte.testCurrent",
        "title": "Vitte: Test Current File",
        "category": "Vitte"
      },
      {
        "command": "vitte.switchProfile",
        "title": "Vitte: Switch Build Profile",
        "category": "Vitte"
      },
      {
        "command": "vitte.toggleIncremental",
        "title": "Vitte: Toggle Incremental Build",
        "category": "Vitte"
      },
      {
        "command": "vitte.refreshTests",
        "title": "Vitte: Refresh Tests",
        "category": "Vitte"
      },
      {
        "command": "vitte.runTests",
        "title": "Vitte: Run All Tests",
        "category": "Vitte"
      },
      {
        "command": "vitte.telemetry.toggle",
        "title": "Vitte: Toggle Telemetry",
        "category": "Vitte"
      }
    ],
    "menus": {
      "view/item/context": [
        {
          "command": "vitte.diagnostics.open",
          "when": "view == vitteDiagnostics && viewItem == vitteDiagnostic",
          "group": "navigation"
        }
      ],
      "view/title": [
        {
          "command": "vitte.diagnostics.refresh",
          "when": "view == vitteDiagnostics",
          "group": "navigation@1"
        },
        {
          "command": "vitte.modules.refresh",
          "when": "view == vitteModules",
          "group": "navigation@1"
        },
        {
          "command": "vitte.refreshExplorer",
          "when": "view == vitteExplorer",
          "group": "navigation@1"
        },
        {
          "command": "vitte.refreshExplorer",
          "when": "view == vitteView",
          "group": "navigation@1"
        }
      ],
      "commandPalette": [
        {
          "command": "vitte.openDocs",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.openPlayground",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.detectToolchain",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.bench",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.benchReport",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.openBenchDir",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.build",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.clean",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.run",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.test",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.testCurrent",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.switchProfile",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.toggleIncremental",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.refreshTests",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.runTests",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "vitte.telemetry.toggle",
          "when": "workspaceFolderCount > 0"
        }
      ]
    },
    "keybindings": [
      {
        "command": "vitte.restartServer",
        "key": "ctrl+shift+r",
        "when": "editorLangId == vitte"
      },
      {
        "command": "vitte.restartServer",
        "key": "ctrl+shift+r",
        "when": "editorLangId == vit"
      },
      {
        "command": "vitte.restartServer",
        "key": "ctrl+shift+r",
        "when": "editorLangId == vitl"
      }
    ],
    "taskDefinitions": [
      {
        "type": "vitte",
        "required": [
          "command"
        ],
        "properties": {
          "command": {
            "type": "string",
            "enum": [
              "build",
              "run",
              "test",
              "clean",
              "bench"
            ]
          }
        }
      }
    ],
    "configuration": {
      "type": "object",
      "title": "Vitte Language",
      "properties": {
        "vitte.trace.server": {
          "type": "string",
          "enum": [
            "off",
            "messages",
            "verbose"
          ],
          "default": "off",
          "description": "Active le traçage du serveur de langage Vitte."
        },
        "vitte.serverPath": {
          "type": "string",
          "default": "",
          "description": "Chemin absolu vers le binaire/serveur personnalisé de Vitte. Vide = utilise le serveur intégré."
        },
        "vitte.debug.program": {
          "type": "string",
          "default": "",
          "description": "Chemin vers le binaire vitte-runtime (laisse vide pour auto-détection)."
        },
        "vitte.vitl.debug.program": {
          "type": "string",
          "default": "",
          "description": "Chemin vers le binaire vitl-runtime (optionnel)."
        },
        "vitte.toolchain.root": {
          "type": "string",
          "default": "",
          "description": "Racine du toolchain Vitte (préfixe pour binaires)."
        },
        "vitte.toolchainPath": {
          "type": "string",
          "default": "",
          "description": "(Legacy) Ancien champ pour la racine du toolchain."
        },
        "vitte.runtime.path": {
          "type": "string",
          "default": "",
          "description": "Chemin du runtime (alternative aux réglages debug.program)."
        },
        "vitte.lsp.path": {
          "type": "string",
          "default": "",
          "description": "Chemin du binaire vitte-lsp."
        },
        "vitte.build.path": {
          "type": "string",
          "default": "",
          "description": "Chemin du binaire vitte-build."
        },
        "vitte.fmt.path": {
          "type": "string",
          "default": "",
          "description": "Chemin du binaire vitte-fmt."
        },
        "vitte.bench.path": {
          "type": "string",
          "default": "",
          "description": "Chemin du binaire vitte-bench."
        },
        "vitte.build.profile": {
          "type": "string",
          "enum": [
            "dev",
            "test",
            "release",
            "bench"
          ],
          "default": "dev",
          "description": "Profil de build par défaut."
        },
        "vitte.build.incremental": {
          "type": "boolean",
          "default": false,
          "description": "Active le build incrémental si supporté."
        },
        "vitte.build.distributed": {
          "type": "boolean",
          "default": false,
          "description": "Active le build distribué si supporté."
        },
        "vitte.bench.reportDir": {
          "type": "string",
          "default": ".vitte/bench",
          "description": "Dossier des rapports de benchmarks."
        },
        "vitte.docs.include": {
          "type": "string",
          "default": "**/*.md",
          "description": "Glob d’inclusion pour l’index des docs locales."
        },
        "vitte.docs.exclude": {
          "type": "string",
          "default": "**/{node_modules,.git,dist,out,target,build}/**",
          "description": "Glob d’exclusion pour l’index des docs locales."
        },
        "vitte.docs.indexLimit": {
          "type": "number",
          "default": 2000,
          "minimum": 100,
          "maximum": 10000,
          "description": "Nombre max de fichiers .md indexés."
        },
        "vitte.telemetry.enabled": {
          "type": "boolean",
          "default": false,
          "description": "Active la télémétrie locale (JSONL écrit dans .vitte/telemetry)."
        },
        "vitte.telemetry.sampleRate": {
          "type": "number",
          "default": 0.1,
          "minimum": 0,
          "maximum": 1,
          "description": "Taux d’échantillonnage 0..1."
        }
      }
    }
  },
  "scripts": {
    "build": "npm run build:client && npm run build:server && npm run build:servercopy",
    "build:client": "tsc -p ./",
    "build:server": "tsc -p server",
    "build:servercopy": "mkdir -p out && (cp server/out/server.js out/server.js || true)",
    "watch": "tsc -w -p ./",
    "compile": "npm run build",
    "lint": "eslint src --ext ts",
    "package": "vsce package",
    "vsix": "vsce package -o dist/vitte-studio.vsix",
    "vsix:verify": "vsce verify dist/vitte-studio.vsix",
    "publish": "vsce publish",
    "prepack": "npm run build",
    "vscode:prepublish": "npm run build",
    "clean": "rimraf node_modules package-lock.json dist && npm ci",
    "audit:fix": "npm audit fix",
    "test": "npm run build && node ./out/test/runTest.js"
  },
  "dependencies": {
    "tough-cookie": "^6.0.0",
    "vscode-languageclient": "^9.0.1",
    "vscode-nls": "^5.2.0",
    "azure-devops-node-api": "^11.2.0",
    "typed-rest-client": "^2.1.0"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "^24.9.2",
    "@types/vscode": "^1.105.0",
    "@vscode/test-electron": "^2.5.2",
    "@vscode/vsce": "2.24.0",
    "eslint": "^9.39.0",
    "glob": "^11.0.3",
    "mkdirp": "^3.0.1",
    "mocha": "^11.7.4",
    "prettier": "^3.6.2",
    "rimraf": "^6.0.1",
    "typescript": "^5.9.3"
  }
}
